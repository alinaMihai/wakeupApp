<div class="modal-header">
    <h3 class="modal-title">{{modalCtrl.data.heading}} Quote</h3>
</div>
<div class="modal-body">
    <form name="addQuoteForm">
        <div class="form-group" ng-class="{'has-error':addQuoteForm.author.$invalid && addQuoteForm.author.$dirty}">
            <label for="author">Author</label>
            <input autocomplete="off" maxlength="200" list="suggestions" type="text" name="author" ng-model="modalCtrl.data.author" class="form-control" required>
            <datalist id="suggestions">
                <select>
                    <option ng-repeat="suggestion in modalCtrl.data.authors" class="ng-scope">{{suggestion|trimFilter:50}}</option>
                </select>
            </datalist>
        </div>
        <div class="form-group" ng-class="{'has-error':addQuoteForm.theText.$invalid && addQuoteForm.theText.$dirty}">
            <label for="theText">Text</label>
            <textarea maxlength="1000" ng-model='modalCtrl.data.text' name="theText" class="form-control verticalTextArea" required></textarea>
        </div>
        <div class="form-group">
            <label for="source">Source</label>
            <input autocomplete="off" maxlength="200" list="sourceSuggestions" type="text" name="source" ng-model="modalCtrl.data.source" class="form-control">
            <datalist id="sourceSuggestions">
                <select>
                    <option ng-repeat="source in modalCtrl.data.sources" class="ng-scope">{{source|trimFilter:50}}</option>
                </select>
            </datalist>
        </div>
        <div class="form-group" ng-if="modalCtrl.data.heading==='Add'">
            <label for="comment">Comment</label>
            <textarea maxlength="500" ng-model='modalCtrl.data.comment' name="text" class="form-control verticalTextArea"></textarea>
        </div>
        <div class="form-group">
            <label for="questionSearch">Question</label>
            <div>
                <select ng-model="modalCtrl.data.associatedQuestion" class="form-control" >
                    <option value=""></option>
                    <option value="{{question.id}}" ng-selected="question.id==modalCtrl.data.question" ng-repeat="question in modalCtrl.data.allQuestions | orderBy:'topic'">`{{question.questionSet|trimFilter:50}}`~~{{question.text|trimFilter:50}}
                          </option>
                </select>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary btn-lg" type="button" ng-click="modalCtrl.ok()" ng-disabled="addQuoteForm.$invalid">{{modalCtrl.data.heading==='Edit'?'Update':'Save'}}</button>
    <button class="btn btn-warning btn-lg" type="button" ng-click="modalCtrl.cancel()">Cancel</button>
</div>
